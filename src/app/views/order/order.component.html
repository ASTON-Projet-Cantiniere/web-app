<main class="justify-center">
    <h1 class="title">Orders</h1>

    <!-- ------------- Premier formulaire --------------- -->
    <h3 class="subtitle">
        Recherche par date:
    </h3>
    <form [formGroup]="formSearchByDate" (ngSubmit)="searchByDate()">
        <div class="row">
            <div class="tiny-column">
                <label for="status">Status de la commande:</label>
                <select id="status" formControlName="status" required>
                    <option value="0">
                        CREATED
                    </option>
                    <option value="1">
                        DELIVERED
                    </option>
                    <option value="2">
                        CANCELED
                    </option>
                </select>    
            </div>
            
            <div class="column">
                <div class="tiny-column">
                    <label for="beginDate">
                        Date de début: 
                    </label>
                    <input id="beginDate" type="date" formControlName="beginDate">
                </div>
                <div class="tiny-column">
                    <label for="endDate">Date de fin: </label>
                    <input id="endDate" type="date" formControlName="endDate">
                </div>
            </div>
            <button type="submit">Submit</button>
        </div>
    </form>

    <!-- ------------- Deuxième formulaire --------------- -->
    <h3 class="subtitle">
        Création de commande:
    </h3>
    <form [formGroup]="formAdd" (ngSubmit)="addOrder()">
        <div class="row">
            <div class="tiny-column">
                <label for="userId">Id de l'utilisateur: </label>
                <input id="userId" type="number" >  
            </div>
            
            <div class="column">
                <div class="tiny-column">
                    <label for="beginDate">
                        Id de la contrainte: 
                    </label>
                    <input type="number">
                </div>
                <div class="tiny-column">
                    <!-- TODO: Faire en sorte qu'on puisse ajouter des repas 'quantity' , le nombre etc -->
                    <label for="">TODO: quantity</label>  
                </div>
            </div>
            <button type="submit">Submit</button>
        </div>
    </form>


    <!-- ------------- Liste des commandes --------------- -->
    <div class="myContainer">
        <!-- <input #id type="text" value="{{order.id}}" hidden> -->
        <section *ngFor="let order of orders">
            <a *ngIf="order.id" (click)="findOrder(order.id)">
                <div class="myOrder">


                    <section class="topInfos">
                        <span>
                            id: {{ order.id }}
                        </span>
                        <span>
                            Created by: {{ order.user.firstname }} {{ order.user.name }} 
                        </span>  
                    </section>


                    <section *ngIf="order.quantity; else pasDeCommande" class="main">
                        <section *ngFor="let plat of order.quantity; let i = index" class="row">
                            {{plat | json}}
                            <!-- <p>
                                {{plat[i]}}
                            </p> -->
                        </section>
                    </section>
                    <ng-template #pasDeCommande class="main">
                        <p>Aucun plat commandé</p>
                    </ng-template>


                    <section class="bottomInfos">
                        <span>
                            At: {{order.creationDate}} / {{order.creationTime}}
                        </span>
                    </section>
                    

                </div>
            </a>
        </section>
 
    </div>
</main>

